---
layout: post
title: 异常处理实践(不敢说最佳
description: 异常处理实践(不敢说最佳
---

# 这是对前一段时间异常处理的一个总结

java异常分为两类 运行时异常和受检异常。两种异常的应用场景如下：

运行时异常： 调用代码不能继续执行，需要立即终止。通常是由于错误的操作，比如数据库connectionURL写错了等等。

受检异常： 调用代码需要进一步处理和恢复，需要显式捕捉，并且在代码产生异常后清理资源（finally语句块）。

## Original method

---
``` java

    public void doSomething() throws SomeException {
        ///这是一个普通方法，声明了受检异常
    }

```
---


## 为了调用doSomething,可以用try catch包裹doSomething()

---
``` java

    public void doSomethingElse(){
        try {
            doSomething();
        } catch (SomeException e) {
            e.printStackTrace();
        }
    }

```
---

## 为了调用doSomething,也可以声明受检异常

---
``` java

    public void doSomethingElse() throws SomeException {
        doSomething();
    }

```
---

但是这两种方式不是每种情况都适用的，假如是类似FileOutputStream这样的需要释放资源的操作一般来说应该使用try catch包裹。

另外：Java 提供了在try语句块中自动释放资源的功能，类似C#的using()语句块，但是不如using()优雅。这样可以避免手动释放资源(还是比之前好一点的

---
``` java

        try (OutputStream outputStream = new FileOutputStream(filePath)) {
            //
        } catch (IOException e) {
            //
        }

```
---

另外的另外： [Lombok](https://izhangzhihao.github.io/2016/06/29/使用Lombok注解/)提供了@Cleanup注解，更加方便了资源释放，下面是栗子：

---
``` java

    public static boolean isImage(@NotNull final File tempFile)
            throws Exception {
        @Cleanup ImageInputStream imageInputStream = ImageIO.createImageInputStream(tempFile);
        return imageInputStream != null;
    }

```
---
